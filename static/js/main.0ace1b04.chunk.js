(this["webpackJsonppi-home-web"]=this["webpackJsonppi-home-web"]||[]).push([[0],{142:function(e,t,a){e.exports=a(155)},147:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(147),a(31)),i=a(11),s=a(129),m=a.n(s),u=a(130),p=a.n(u),d=a(131),b=a.n(d),v=a(132),E=a.n(v),f=a(21),h=a(213),g=a(74),O=a.n(g),j=a(86);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&window.localStorage.setItem(e,t);var a=function(t){window.localStorage.setItem(e,t)};return[window.localStorage.getItem(e),a]}function w(e){var t=x("serverBaseUrl"),a=Object(f.a)(t,1)[0],r=Object(n.useState)(null),c=Object(f.a)(r,2),l=c[0],o=c[1],i=Object(n.useState)(null),s=Object(f.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)(!1),d=Object(f.a)(p,2),b=d[0],v=d[1];return Object(n.useEffect)((function(){(function(){var t=Object(j.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.prev=1,t.next=4,fetch("".concat(a).concat(e));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,o(r),v(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),u(t.t0),v(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}})()()}),[a,e]),{data:l,error:m,loading:b}}var k=a(84),y=a(203),N=a(228),S=a(121),B=a.n(S),L=a(208),I=a(209),U=a(210),C=a(212),F=a(211),P=a(207),W=a(85),A=a(123),T=a.n(A),R=a(122),D=a.n(R),z=Object(y.a)((function(e){return Object(N.a)({root:{flexGrow:1},card:{textAlign:"center",color:e.palette.text.secondary},cardActions:{height:50},cardActionsRoot:{padding:8,display:"block"},media:{height:140,width:140,display:"block",margin:"auto"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},actionItem:{display:"inline-block"},link:{textDecoration:"none",color:B.a[500]}})})),q=function(e){var t=e.device,a=z(),c=Object(n.useState)(t.status),l=Object(f.a)(c,2),i=l[0],s=l[1],m=x("serverBaseUrl"),u=Object(f.a)(m,1)[0],p=function(){var e=Object(j.a)(O.a.mark((function e(a){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==a){e.next=9;break}return e.next=3,fetch("".concat(u,"/api/devices/change-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:t.pin})});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=r.status,s(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=null,b={fontSize:125},v=null;return"led"===t.type?(i&&(b=Object(k.a)(Object(k.a)({},b),{},{fill:"#ffef62"})),d=r.a.createElement(D.a,{style:b}),v=r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{size:"small",color:"primary",className:a.actionItem,onClick:function(){return p(1)}},"Off"),r.a.createElement(W.a,{variant:"h5",component:"h2",className:a.actionItem},r.a.createElement("span",{className:a.bullet},"\u2022")),r.a.createElement(P.a,{size:"small",color:"primary",className:a.actionItem,onClick:function(){return p(0)}},"On"))):t.type.toLowerCase().endsWith("button")&&(d=r.a.createElement(T.a,{style:Object(k.a)(Object(k.a)({},b),{},{fill:"#2a3eb1"})})),r.a.createElement(L.a,{item:!0,lg:3,md:4,xs:6},r.a.createElement(I.a,{className:a.card},r.a.createElement(U.a,null,r.a.createElement(o.b,{to:"/devices/view/".concat(t.pin),className:a.link},d),r.a.createElement(F.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.label))),r.a.createElement(C.a,{className:a.cardActions,classes:{root:a.cardActionsRoot}},v)))},G=function(e){var t=e.devices,a=z();return r.a.createElement("div",{className:a.root},r.a.createElement(L.a,{container:!0,spacing:3},t&&t.map((function(e){return r.a.createElement(q,{key:e.pin,device:e})}))))},H=function(){var e=w("/api/devices"),t=e.data,a=e.loading;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(h.a,null):r.a.createElement(G,{devices:t}))},J=function(){return r.a.createElement(r.a.Fragment,null,"add device")},M=function(){return r.a.createElement(r.a.Fragment,null,"edit device")},$=function(){return r.a.createElement(r.a.Fragment,null,"view device")},V=function(){return r.a.createElement(r.a.Fragment,null,"not found page")},K=a(42),Q=a(128),X=a.n(Q),Y=a(103),Z=a(102),_=a(3),ee=a(112),te=a(134),ae=a(224),ne=a(215),re=a(127),ce=a.n(re),le=Object(y.a)((function(e){return Object(N.a)({errorIcon:{color:"#ff1818"}})})),oe=function(e){var t=e.className,a=e.error,n=e.inputProps,c=void 0===n?{}:n,l=e.variant,o=void 0===l?"filled":l,i=Object(te.a)(e,["className","error","inputProps","variant"]),s=le();return r.a.createElement(ae.a,Object.assign({"data-id":"custom-input"},i,{className:t,variant:o,fullWidth:!0,margin:"dense",error:!!a,helperText:a,inputProps:{maxLength:c.maxLength},InputProps:{endAdornment:a&&r.a.createElement(ne.a,{position:"end"},r.a.createElement(ce.a,{className:s.errorIcon}))}}))},ie=Object(y.a)((function(e){return Object(N.a)({wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:Z.a[500],"&:hover":{backgroundColor:Z.a[700]}},buttonProgress:{color:Z.a[500]}})})),se=ee.a().shape({serverBaseUrl:ee.b().test({name:"serverBaseUrl",message:"${path} must be a valid URL",test:function(e){try{if(e)return new URL(e).protocol.startsWith("http")}catch(t){}return!1}}).required("Required")}),me=function(){var e=ie(),t=x("serverBaseUrl"),a=Object(f.a)(t,2),n=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{variant:"h5",noWrap:!0},"Server Settings"),r.a.createElement(Y.c,{initialValues:{serverBaseUrl:n||""},validationSchema:se,onSubmit:function(e,t){var a=t.setSubmitting;(0,t.setStatus)(!0),setTimeout((function(){c(e.serverBaseUrl),a(!1)}),500)}},(function(t){var a=t.isSubmitting,n=t.status,c=Object(_.a)(Object(K.a)({},e.buttonSuccess,n)),l="Save";return a?l=r.a.createElement(h.a,{size:24,className:e.buttonProgress}):n&&(l=r.a.createElement(X.a,null)),r.a.createElement(Y.b,null,r.a.createElement(Y.a,{name:"serverBaseUrl"},(function(e){var t=e.field,a=e.meta.error;return r.a.createElement(oe,Object.assign({label:"Server Base Url",error:a},t,{required:!0}))})),r.a.createElement("div",{className:e.wrapper},r.a.createElement(P.a,{variant:"contained",color:"primary",type:"submit",className:c,disabled:a},l)))})))},ue=Object(y.a)((function(e){return Object(N.a)({root:{padding:e.spacing(3)},logo:{display:"block",margin:"auto"},text:{textAlign:"center",color:"black"}})})),pe=function(){var e=ue();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{alt:"Pi Home",className:e.logo,src:"".concat("/pi-home-web","/images/icons/icon-96x96.png")}),r.a.createElement(W.a,{variant:"h5",className:e.text,noWrap:!0},"Pi Home"))},de=Object(y.a)((function(e){return Object(N.a)({link:{textDecoration:"none"},text:{textAlign:"center",color:"black"},disclamer:{marginTop:50}})})),be=[{path:"/",label:"Home",exact:!0,icon:m.a,component:function(){var e=x("serverBaseUrl");if(!Object(f.a)(e,1)[0])return r.a.createElement(i.a,{to:"/welcome"});var t=w("/api/devices?type=led"),a=t.data,n=t.loading;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(h.a,null):r.a.createElement(G,{devices:a}))},sidebar:!0},{path:"/devices",label:"Devices",divider:!0,icon:p.a,component:function(){var e=Object(i.h)().path,t=x("serverBaseUrl");return Object(f.a)(t,1)[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:e,component:H}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/add"),component:J}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/view/:id(\\d+)"),component:$}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/edit/:id(\\d+)"),component:M}),r.a.createElement(i.b,{path:"".concat(e,"/*"),component:V}))):r.a.createElement(i.a,{to:"/welcome"})},sidebar:!0},{path:"/settings",label:"Settings",exact:!0,icon:b.a,component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,null))},sidebar:!0},{path:"/about",label:"About",exact:!0,icon:E.a,component:function(){return r.a.createElement(r.a.Fragment,null,"about page")},sidebar:!0},{path:"/welcome",label:"Welcome",exact:!0,component:function(){var e=de();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,null),r.a.createElement(W.a,{variant:"h3",className:e.text,noWrap:!0},"Welcome!"),r.a.createElement("div",{className:e.disclamer},r.a.createElement(W.a,{component:"h6"},"In order to get started, you need to configure the app to connect it with your server"),r.a.createElement(o.b,{to:"/settings",className:e.link},r.a.createElement(P.a,{variant:"outlined",color:"primary"},"Go To Settings"))))}},{path:"/*",component:V}],ve=a(221),Ee=a(220),fe=a(219),he=a(227),ge=a(226),Oe=a(223),je=a(214),xe=a(216),we=a(217),ke=a(218),ye=a(133),Ne=a.n(ye),Se=a(222),Be=a(16),Le=Object(y.a)((function(e){var t;return Object(N.a)({root:{display:"flex"},drawer:Object(K.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:(t={},Object(K.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),Object(K.a)(t,"backgroundColor","#282c34"),t),menuButton:Object(K.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},navListLink:{textDecoration:"none"},navListItemText:{color:"#000"}})})),Ie=function(e){var t=e.label,a=e.path,n=e.divider,c=e.selected,l=e.onClick,i=e.icon,s=Le();return r.a.createElement(o.b,{to:a,className:s.navListLink,onClick:l},r.a.createElement(xe.a,{divider:n,selected:c,button:!0},r.a.createElement(we.a,null,r.a.createElement(i,null)),r.a.createElement(ke.a,{classes:{root:s.navListItemText},primary:t})))},Ue=function(e){var t=e.children,a=Le(),c=Object(Be.a)(),l=Object(i.g)(),s=Object(n.useState)(!1),m=Object(f.a)(s,2),u=m[0],p=m[1],d=function(){return p(!u)},b="Not Found",v=be.find((function(e){return"/"!==e.path&&"/*"!==e.path?l.pathname.startsWith(e.path):e.path===l.pathname}));v&&v.label&&(b=v.label);var E=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar},r.a.createElement(o.b,{to:"/",className:a.navListLink,onClick:function(){return p(!1)}},r.a.createElement(pe,null))),r.a.createElement(fe.a,null),r.a.createElement(je.a,null,be.filter((function(e){return e.sidebar})).map((function(e){return r.a.createElement(Ie,{key:e.path,label:e.label,path:e.path,icon:e.icon,divider:e.divider,selected:!!Object(i.f)(l.pathname,{path:e.path,exact:e.exact}),onClick:function(){return p(!1)}})}))));return r.a.createElement("div",{className:a.root},r.a.createElement(Ee.a,null),r.a.createElement(ve.a,{position:"fixed",className:a.appBar},r.a.createElement(Se.a,null,r.a.createElement(Oe.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:a.menuButton},r.a.createElement(Ne.a,null)),r.a.createElement(W.a,{variant:"h6",noWrap:!0},b))),r.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},r.a.createElement(ge.a,{smUp:!0,implementation:"css"},r.a.createElement(he.a,{variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:u,onClose:d,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},E)),r.a.createElement(ge.a,{xsDown:!0,implementation:"css"},r.a.createElement(he.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},E))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),t))},Ce=function(){return r.a.createElement(o.a,{basename:"/pi-home-web"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(Ue,null,r.a.createElement(i.d,null,be.map((function(e,t){return r.a.createElement(i.b,{key:t,path:e.path,exact:e.exact,component:e.component})}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[142,1,2]]]);
//# sourceMappingURL=main.0ace1b04.chunk.js.map