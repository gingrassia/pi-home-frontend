(this["webpackJsonppi-home-web"]=this["webpackJsonppi-home-web"]||[]).push([[0],{141:function(e,a,t){e.exports=t(154)},146:function(e,a,t){},154:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),o=(t(146),t(40)),i=t(11),s=t(128),m=t.n(s),u=t(129),p=t.n(u),d=t(130),b=t.n(d),v=t(131),E=t.n(v),h=t(24),f=t(212),g=t(107),O=t.n(g),j=t(120);function x(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a&&window.localStorage.setItem(e,a);var t=function(a){window.localStorage.setItem(e,a)};return[window.localStorage.getItem(e),t]}function w(e){var a=x("serverBaseUrl"),t=Object(h.a)(a,1)[0],r=Object(n.useState)(null),c=Object(h.a)(r,2),l=c[0],o=c[1],i=Object(n.useState)(null),s=Object(h.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)(!1),d=Object(h.a)(p,2),b=d[0],v=d[1];return Object(n.useEffect)((function(){(function(){var a=Object(j.a)(O.a.mark((function a(){var n,r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(!0),a.prev=1,a.next=4,fetch("".concat(t).concat(e));case 4:return n=a.sent,a.next=7,n.json();case 7:r=a.sent,o(r),v(!1),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),u(a.t0),v(!1);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(){return a.apply(this,arguments)}})()()}),[t,e]),{data:l,error:m,loading:b}}var k=t(83),y=t(202),N=t(227),S=t(207),B=t(208),L=t(209),U=t(211),F=t(210),P=t(206),W=t(84),C=t(122),I=t.n(C),A=t(121),T=t.n(A),z=Object(y.a)((function(e){return Object(N.a)({root:{flexGrow:1},card:{textAlign:"center",color:e.palette.text.secondary},cardActions:{height:50},media:{height:140,width:140,display:"block",margin:"auto"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}})})),D=function(e){var a=e.device,t=z(),n=null,c={fontSize:200},l=null;return"led"===a.type?(1===a.status&&(c=Object(k.a)(Object(k.a)({},c),{},{fill:"#ffef62"})),n=r.a.createElement(T.a,{style:c}),l=r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{size:"small",color:"primary"},"Off"),r.a.createElement(W.a,{variant:"h5",component:"h2"},r.a.createElement("span",{className:t.bullet},"\u2022")),r.a.createElement(P.a,{size:"small",color:"primary"},"On"))):a.type.toLowerCase().endsWith("button")&&(n=r.a.createElement(I.a,{style:Object(k.a)(Object(k.a)({},c),{},{fill:"#2a3eb1"})})),r.a.createElement(S.a,{item:!0,lg:3,md:4,xs:6},r.a.createElement(B.a,{className:t.card},r.a.createElement(L.a,null,n,r.a.createElement(F.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.label))),r.a.createElement(U.a,{className:t.cardActions},l)))},R=function(e){var a=e.devices,t=z();return r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{container:!0,spacing:3},a&&a.map((function(e){return r.a.createElement(D,{key:e.pin,device:e})}))))},q=function(){var e=w("/api/devices"),a=e.data,t=e.loading;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(f.a,null):r.a.createElement(R,{devices:a}))},G=function(){return r.a.createElement(r.a.Fragment,null,"add device")},H=function(){return r.a.createElement(r.a.Fragment,null,"edit device")},M=function(){return r.a.createElement(r.a.Fragment,null,"not found page")},J=t(42),$=t(127),V=t.n($),K=t(101),Q=t(100),X=t(3),Y=t(111),Z=t(133),_=t(223),ee=t(214),ae=t(126),te=t.n(ae),ne=Object(y.a)((function(e){return Object(N.a)({errorIcon:{color:"#ff1818"}})})),re=function(e){var a=e.className,t=e.error,n=e.inputProps,c=void 0===n?{}:n,l=e.variant,o=void 0===l?"filled":l,i=Object(Z.a)(e,["className","error","inputProps","variant"]),s=ne();return r.a.createElement(_.a,Object.assign({"data-id":"custom-input"},i,{className:a,variant:o,fullWidth:!0,margin:"dense",error:!!t,helperText:t,inputProps:{maxLength:c.maxLength},InputProps:{endAdornment:t&&r.a.createElement(ee.a,{position:"end"},r.a.createElement(te.a,{className:s.errorIcon}))}}))},ce=Object(y.a)((function(e){return Object(N.a)({wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:Q.a[500],"&:hover":{backgroundColor:Q.a[700]}},buttonProgress:{color:Q.a[500]}})})),le=Y.a().shape({serverBaseUrl:Y.b().test({name:"serverBaseUrl",message:"${path} must be a valid URL",test:function(e){try{if(e)return new URL(e).protocol.startsWith("http")}catch(a){}return!1}}).required("Required")}),oe=function(){var e=ce(),a=x("serverBaseUrl"),t=Object(h.a)(a,2),n=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{variant:"h5",noWrap:!0},"Server Settings"),r.a.createElement(K.c,{initialValues:{serverBaseUrl:n||""},validationSchema:le,onSubmit:function(e,a){var t=a.setSubmitting;(0,a.setStatus)(!0),setTimeout((function(){c(e.serverBaseUrl),t(!1)}),500)}},(function(a){var t=a.isSubmitting,n=a.status,c=Object(X.a)(Object(J.a)({},e.buttonSuccess,n)),l="Save";return t?l=r.a.createElement(f.a,{size:24,className:e.buttonProgress}):n&&(l=r.a.createElement(V.a,null)),r.a.createElement(K.b,null,r.a.createElement(K.a,{name:"serverBaseUrl"},(function(e){var a=e.field,t=e.meta.error;return r.a.createElement(re,Object.assign({label:"Server Base Url",error:t},a,{required:!0}))})),r.a.createElement("div",{className:e.wrapper},r.a.createElement(P.a,{variant:"contained",color:"primary",type:"submit",className:c,disabled:t},l)))})))},ie=Object(y.a)((function(e){return Object(N.a)({root:{padding:e.spacing(3)},logo:{display:"block",margin:"auto"},text:{textAlign:"center",color:"black"}})})),se=function(){var e=ie();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{alt:"Pi Home",className:e.logo,src:"".concat("/pi-home-web","/images/icons/icon-96x96.png")}),r.a.createElement(W.a,{variant:"h5",className:e.text,noWrap:!0},"Pi Home"))},me=Object(y.a)((function(e){return Object(N.a)({link:{textDecoration:"none"},text:{textAlign:"center",color:"black"},disclamer:{marginTop:50}})})),ue=[{path:"/",label:"Home",exact:!0,icon:m.a,component:function(){var e=x("serverBaseUrl");if(!Object(h.a)(e,1)[0])return r.a.createElement(i.a,{to:"/welcome"});var a=w("/api/devices?type=led"),t=a.data,n=a.loading;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(f.a,null):r.a.createElement(R,{devices:t}))},sidebar:!0},{path:"/devices",label:"Devices",divider:!0,icon:p.a,component:function(){var e=Object(i.h)().path,a=x("serverBaseUrl");return Object(h.a)(a,1)[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:e,component:q}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/add"),component:G}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/edit/:id(\\d+)"),component:H}),r.a.createElement(i.b,{path:"".concat(e,"/*"),component:M}))):r.a.createElement(i.a,{to:"/welcome"})},sidebar:!0},{path:"/settings",label:"Settings",exact:!0,icon:b.a,component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null))},sidebar:!0},{path:"/about",label:"About",exact:!0,icon:E.a,component:function(){return r.a.createElement(r.a.Fragment,null,"about page")},sidebar:!0},{path:"/welcome",label:"Welcome",exact:!0,component:function(){var e=me();return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,null),r.a.createElement(W.a,{variant:"h3",className:e.text,noWrap:!0},"Welcome!"),r.a.createElement("div",{className:e.disclamer},r.a.createElement(W.a,{component:"h6"},"In order to get started, you need to configure the app to connect it with your server"),r.a.createElement(o.b,{to:"/settings",className:e.link},r.a.createElement(P.a,{variant:"outlined",color:"primary"},"Go To Settings"))))}},{path:"/*",component:M}],pe=t(220),de=t(219),be=t(218),ve=t(226),Ee=t(225),he=t(222),fe=t(213),ge=t(215),Oe=t(216),je=t(217),xe=t(132),we=t.n(xe),ke=t(221),ye=t(16),Ne=Object(y.a)((function(e){var a;return Object(N.a)({root:{display:"flex"},drawer:Object(J.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:(a={},Object(J.a)(a,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),Object(J.a)(a,"backgroundColor","#282c34"),a),menuButton:Object(J.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},navListLink:{textDecoration:"none"},navListItemText:{color:"#000"}})})),Se=function(e){var a=e.label,t=e.path,n=e.divider,c=e.selected,l=e.onClick,i=e.icon,s=Ne();return r.a.createElement(o.b,{to:t,className:s.navListLink,onClick:l},r.a.createElement(ge.a,{divider:n,selected:c,button:!0},r.a.createElement(Oe.a,null,r.a.createElement(i,null)),r.a.createElement(je.a,{classes:{root:s.navListItemText},primary:a})))},Be=function(e){var a=e.children,t=Ne(),c=Object(ye.a)(),l=Object(i.g)(),s=Object(n.useState)(!1),m=Object(h.a)(s,2),u=m[0],p=m[1],d=function(){return p(!u)},b="Not Found",v=ue.find((function(e){return"/"!==e.path&&"/*"!==e.path?l.pathname.startsWith(e.path):e.path===l.pathname}));v&&v.label&&(b=v.label);var E=r.a.createElement("div",null,r.a.createElement("div",{className:t.toolbar},r.a.createElement(o.b,{to:"/",className:t.navListLink,onClick:function(){return p(!1)}},r.a.createElement(se,null))),r.a.createElement(be.a,null),r.a.createElement(fe.a,null,ue.filter((function(e){return e.sidebar})).map((function(e){return r.a.createElement(Se,{key:e.path,label:e.label,path:e.path,icon:e.icon,divider:e.divider,selected:!!Object(i.f)(l.pathname,{path:e.path,exact:e.exact}),onClick:function(){return p(!1)}})}))));return r.a.createElement("div",{className:t.root},r.a.createElement(de.a,null),r.a.createElement(pe.a,{position:"fixed",className:t.appBar},r.a.createElement(ke.a,null,r.a.createElement(he.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:t.menuButton},r.a.createElement(we.a,null)),r.a.createElement(W.a,{variant:"h6",noWrap:!0},b))),r.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},r.a.createElement(Ee.a,{smUp:!0,implementation:"css"},r.a.createElement(ve.a,{variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:u,onClose:d,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},E)),r.a.createElement(Ee.a,{xsDown:!0,implementation:"css"},r.a.createElement(ve.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},E))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.toolbar}),a))},Le=function(){return r.a.createElement(o.a,{basename:"/pi-home-web"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(Be,null,r.a.createElement(i.d,null,ue.map((function(e,a){return r.a.createElement(i.b,{key:a,path:e.path,exact:e.exact,component:e.component})}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.79431029.chunk.js.map