(this["webpackJsonppi-home-web"]=this["webpackJsonppi-home-web"]||[]).push([[0],{168:function(e,t,a){e.exports=a(213)},173:function(e,t,a){},209:function(e,t){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(173),a(31)),i=a(11),s=a(155),m=a.n(s),u=a(156),p=a.n(u),d=a(157),b=a.n(d),v=a(158),f=a.n(v),E=a(12),h=a(271),g=a(76),j=a.n(g),O=a(90);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&window.localStorage.setItem(e,t);var a=function(t){window.localStorage.setItem(e,t)};return[window.localStorage.getItem(e),a]}var w,k=a(86),y=a(261),N=a(286),S=a(146),B=a.n(S),L=a(266),U=a(267),C=a(268),I=a(270),F=a(269),P=a(265),W=a(87),A=a(148),T=a.n(A),D=a(147),R=a.n(D),z=Object(y.a)((function(e){return Object(N.a)({root:{flexGrow:1},card:{textAlign:"center",color:e.palette.text.secondary},cardActions:{height:50},cardActionsRoot:{padding:8,display:"inline-flex"},media:{height:140,width:140,display:"block",margin:"auto"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},actionItem:{display:"inline-block"},link:{textDecoration:"none",color:B.a[500]}})})),q=function(e){var t=e.device,a=z(),c=Object(n.useState)(t.status),l=Object(E.a)(c,2),i=l[0],s=l[1],m=x("serverBaseUrl"),u=Object(E.a)(m,1)[0],p=function(){var e=Object(O.a)(j.a.mark((function e(a){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==a){e.next=9;break}return e.next=3,fetch("".concat(u,"/api/devices/change-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:t.pin})});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=r.status,s(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=null,b={fontSize:125},v=null;return"led"===t.type?(i&&(b=Object(k.a)(Object(k.a)({},b),{},{fill:"#ffef62"})),d=r.a.createElement(R.a,{style:b}),v=r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{size:"small",color:"primary",className:a.actionItem,onClick:function(){return p(1)}},"Off"),r.a.createElement(W.a,{variant:"h5",component:"h2",className:a.actionItem},r.a.createElement("span",{className:a.bullet},"\u2022")),r.a.createElement(P.a,{size:"small",color:"primary",className:a.actionItem,onClick:function(){return p(0)}},"On"))):t.type.toLowerCase().endsWith("button")&&(d=r.a.createElement(T.a,{style:Object(k.a)(Object(k.a)({},b),{},{fill:"#2a3eb1"})})),r.a.createElement(L.a,{item:!0,lg:3,md:4,xs:6},r.a.createElement(U.a,{className:a.card},r.a.createElement(C.a,null,r.a.createElement(o.b,{to:"/devices/view/".concat(t.pin),className:a.link},d),r.a.createElement(F.a,null,r.a.createElement(W.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.label))),r.a.createElement(I.a,{className:a.cardActions,classes:{root:a.cardActionsRoot}},v)))},G=function(e){var t=e.devices,a=z();return r.a.createElement("div",{className:a.root},r.a.createElement(L.a,{container:!0,spacing:3},t&&t.map((function(e){return r.a.createElement(q,{key:e.pin,device:e})}))))},H=a(149),J=a.n(H),M=function(){var e=x("serverBaseUrl"),t=Object(E.a)(e,1)[0],a=Object(n.useState)(null),c=Object(E.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(null),s=Object(E.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)(!1),d=Object(E.a)(p,2),b=d[0],v=d[1],f=Object(n.useCallback)((function(){v(!0),fetch("".concat(t,"/api/devices")).then((function(e){return e.json()})).then((function(e){o(e),v(!1)})).catch((function(e){u(e),v(!1)}))}),[t]);return Object(n.useEffect)((function(){var e,a,n;return f(),t&&(n="".concat(t),w=J()(n),e="changeDeviceStatus",a=function(){f()},w&&w.on(e,(function(e){a(e)}))),function(){w&&w.disconnect()}}),[f,t]),r.a.createElement(r.a.Fragment,null,!m&&b?r.a.createElement(h.a,null):r.a.createElement(G,{devices:l}))},$=function(){return r.a.createElement(r.a.Fragment,null,"add device")},V=function(){return r.a.createElement(r.a.Fragment,null,"edit device")},K=function(){return r.a.createElement(r.a.Fragment,null,"view device")},Q=function(){return r.a.createElement(r.a.Fragment,null,"not found page")},X=a(42),Y=a(154),Z=a.n(Y),_=a(107),ee=a(106),te=a(3),ae=a(123),ne=a(160),re=a(282),ce=a(273),le=a(153),oe=a.n(le),ie=Object(y.a)((function(e){return Object(N.a)({errorIcon:{color:"#ff1818"}})})),se=function(e){var t=e.className,a=e.error,n=e.inputProps,c=void 0===n?{}:n,l=e.variant,o=void 0===l?"filled":l,i=Object(ne.a)(e,["className","error","inputProps","variant"]),s=ie();return r.a.createElement(re.a,Object.assign({"data-id":"custom-input"},i,{className:t,variant:o,fullWidth:!0,margin:"dense",error:!!a,helperText:a,inputProps:{maxLength:c.maxLength},InputProps:{endAdornment:a&&r.a.createElement(ce.a,{position:"end"},r.a.createElement(oe.a,{className:s.errorIcon}))}}))},me=Object(y.a)((function(e){return Object(N.a)({wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:ee.a[500],"&:hover":{backgroundColor:ee.a[700]}},buttonProgress:{color:ee.a[500]}})})),ue=ae.a().shape({serverBaseUrl:ae.b().test({name:"serverBaseUrl",message:"${path} must be a valid URL",test:function(e){try{if(e)return new URL(e).protocol.startsWith("http")}catch(t){}return!1}}).required("Required")}),pe=function(){var e=me(),t=x("serverBaseUrl"),a=Object(E.a)(t,2),n=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{variant:"h5",noWrap:!0},"Server Settings"),r.a.createElement(_.c,{initialValues:{serverBaseUrl:n||""},validationSchema:ue,onSubmit:function(e,t){var a=t.setSubmitting;(0,t.setStatus)(!0),setTimeout((function(){c(e.serverBaseUrl),a(!1)}),500)}},(function(t){var a=t.isSubmitting,n=t.status,c=Object(te.a)(Object(X.a)({},e.buttonSuccess,n)),l="Save";return a?l=r.a.createElement(h.a,{size:24,className:e.buttonProgress}):n&&(l=r.a.createElement(Z.a,null)),r.a.createElement(_.b,null,r.a.createElement(_.a,{name:"serverBaseUrl"},(function(e){var t=e.field,a=e.meta.error;return r.a.createElement(se,Object.assign({label:"Server Base Url",error:a},t,{required:!0}))})),r.a.createElement("div",{className:e.wrapper},r.a.createElement(P.a,{variant:"contained",color:"primary",type:"submit",className:c,disabled:a},l)))})))},de=Object(y.a)((function(e){return Object(N.a)({root:{padding:e.spacing(3)},logo:{display:"block",margin:"auto"},text:{textAlign:"center",color:"black"}})})),be=function(){var e=de();return r.a.createElement("div",{className:e.root},r.a.createElement("img",{alt:"Pi Home",className:e.logo,src:"".concat("/pi-home-web","/images/icons/icon-96x96.png")}),r.a.createElement(W.a,{variant:"h5",className:e.text,noWrap:!0},"Pi Home"))},ve=Object(y.a)((function(e){return Object(N.a)({link:{textDecoration:"none"},text:{textAlign:"center",color:"black"},disclamer:{marginTop:50}})})),fe=[{path:"/",label:"Home",exact:!0,icon:m.a,component:function(){var e=x("serverBaseUrl");if(!Object(E.a)(e,1)[0])return r.a.createElement(i.a,{to:"/welcome"});var t=function(e){var t=x("serverBaseUrl"),a=Object(E.a)(t,1)[0],r=Object(n.useState)(null),c=Object(E.a)(r,2),l=c[0],o=c[1],i=Object(n.useState)(null),s=Object(E.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)(!1),d=Object(E.a)(p,2),b=d[0],v=d[1];return Object(n.useEffect)((function(){(function(){var t=Object(O.a)(j.a.mark((function t(){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.prev=1,t.next=4,fetch("".concat(a).concat(e));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,o(r),v(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),u(t.t0),v(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}})()()}),[a,e]),{data:l,error:m,loading:b}}("/api/devices?type=led"),a=t.data,c=t.loading;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(h.a,null):r.a.createElement(G,{devices:a}))},sidebar:!0},{path:"/devices",label:"Devices",divider:!0,icon:p.a,component:function(){var e=Object(i.h)().path,t=x("serverBaseUrl");return Object(E.a)(t,1)[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:e,component:M}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/add"),component:$}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/view/:id(\\d+)"),component:K}),r.a.createElement(i.b,{exact:!0,path:"".concat(e,"/edit/:id(\\d+)"),component:V}),r.a.createElement(i.b,{path:"".concat(e,"/*"),component:Q}))):r.a.createElement(i.a,{to:"/welcome"})},sidebar:!0},{path:"/settings",label:"Settings",exact:!0,icon:b.a,component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,null))},sidebar:!0},{path:"/about",label:"About",exact:!0,icon:f.a,component:function(){return r.a.createElement(r.a.Fragment,null,"about page")},sidebar:!0},{path:"/welcome",label:"Welcome",exact:!0,component:function(){var e=ve();return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement(W.a,{variant:"h3",className:e.text,noWrap:!0},"Welcome!"),r.a.createElement("div",{className:e.disclamer},r.a.createElement(W.a,{component:"h6"},"In order to get started, you need to configure the app to connect it with your server"),r.a.createElement(o.b,{to:"/settings",className:e.link},r.a.createElement(P.a,{variant:"outlined",color:"primary"},"Go To Settings"))))}},{path:"/*",component:Q}],Ee=a(279),he=a(278),ge=a(277),je=a(285),Oe=a(284),xe=a(281),we=a(272),ke=a(274),ye=a(275),Ne=a(276),Se=a(159),Be=a.n(Se),Le=a(280),Ue=a(17),Ce=Object(y.a)((function(e){var t;return Object(N.a)({root:{display:"flex"},drawer:Object(X.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:(t={},Object(X.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),Object(X.a)(t,"backgroundColor","#282c34"),t),menuButton:Object(X.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},navListLink:{textDecoration:"none"},navListItemText:{color:"#000"}})})),Ie=function(e){var t=e.label,a=e.path,n=e.divider,c=e.selected,l=e.onClick,i=e.icon,s=Ce();return r.a.createElement(o.b,{to:a,className:s.navListLink,onClick:l},r.a.createElement(ke.a,{divider:n,selected:c,button:!0},r.a.createElement(ye.a,null,r.a.createElement(i,null)),r.a.createElement(Ne.a,{classes:{root:s.navListItemText},primary:t})))},Fe=function(e){var t=e.children,a=Ce(),c=Object(Ue.a)(),l=Object(i.g)(),s=Object(n.useState)(!1),m=Object(E.a)(s,2),u=m[0],p=m[1],d=function(){return p(!u)},b="Not Found",v=fe.find((function(e){return"/"!==e.path&&"/*"!==e.path?l.pathname.startsWith(e.path):e.path===l.pathname}));v&&v.label&&(b=v.label);var f=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar},r.a.createElement(o.b,{to:"/",className:a.navListLink,onClick:function(){return p(!1)}},r.a.createElement(be,null))),r.a.createElement(ge.a,null),r.a.createElement(we.a,null,fe.filter((function(e){return e.sidebar})).map((function(e){return r.a.createElement(Ie,{key:e.path,label:e.label,path:e.path,icon:e.icon,divider:e.divider,selected:!!Object(i.f)(l.pathname,{path:e.path,exact:e.exact}),onClick:function(){return p(!1)}})}))));return r.a.createElement("div",{className:a.root},r.a.createElement(he.a,null),r.a.createElement(Ee.a,{position:"fixed",className:a.appBar},r.a.createElement(Le.a,null,r.a.createElement(xe.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:a.menuButton},r.a.createElement(Be.a,null)),r.a.createElement(W.a,{variant:"h6",noWrap:!0},b))),r.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},r.a.createElement(Oe.a,{smUp:!0,implementation:"css"},r.a.createElement(je.a,{variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:u,onClose:d,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},f)),r.a.createElement(Oe.a,{xsDown:!0,implementation:"css"},r.a.createElement(je.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},f))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),t))},Pe=function(){return r.a.createElement(o.a,{basename:"/pi-home-web"},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(Fe,null,r.a.createElement(i.d,null,fe.map((function(e,t){return r.a.createElement(i.b,{key:t,path:e.path,exact:e.exact,component:e.component})}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.95a39e12.chunk.js.map